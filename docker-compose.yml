version: '3.8'

services:
  pai-service-ai:
    build:
      context: .
      dockerfile: Dockerfile
    image: pai-service-ai:latest
    container_name: pai-service-ai
    ports:
      - "8080:8080"
    environment:
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - GMS_KEY=${GMS_KEY}
      - ELEVENLABS_API_KEY=${ELEVENLABS_API_KEY}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
    volumes:
      # Mount models directory if you have pre-trained models
      # - ./src/models:/app/src/models
      # Mount .env file for local development (optional)
      # - ./src/.env:/app/src/.env
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "python", "-c", "import requests; requests.get('http://localhost:8080/')"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s
    # Uncomment if you need GPU support
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]
